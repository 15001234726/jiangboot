<select id="selectUserByIdsAndCells" resultMap="BaseResultMap" parameterType="java.lang.String">
    select * from IT_user
    <where>
        <if test="ids != null ">
            or id in
            <foreach item="id" index="index" collection="ids" open="(" separator="," close=")">#{id}
            </foreach>
        </if>
        <if test="cells != null">
            or cell in
            <foreach item="cell" index="index" collection="cells" open="(" separator="," close=")">
                #{cell}
            </foreach>
        </if>
        <if test="ids == null and cells == null" >
            id not IN (
            SELECT us.id
            FROM IT_user us
            WHERE
            us.employ_type LIKE CONCAT( '%', '实习生')
            OR ( us.status in ('已保留', '已禁用')
            AND ( LENGTH(us.didi_id)  &gt; 1 ))
            OR ( us.cell is NULL OR LENGTH(us.cell) &lt; 1 ))
        </if>
    </where>
</select>